* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, "Segoe UI", Roboto, Arial, sans-serif;
  line-height: 1.5;
  color: #222;
  background: radial-gradient(circle at 30% 20%, #fff8e1, #fffef9 55%);
  --accent: #ffb347;
  --accent-strong: #ff9800;
  --radius: 16px;
  --bg-panel: #fff;
  --bg-soft: #fff9ea;
  --border-soft: #f7e2a5;
  --shadow-1: 0 4px 16px -4px rgba(0,0,0,.08), 0 2px 4px -1px rgba(0,0,0,.04);
  --transition-fast: 140ms cubic-bezier(.4,.0,.2,1);
  scroll-behavior: smooth;
}
header {
  background: linear-gradient(90deg,#ffb347,#ffcc33);
  color: #222;
  padding: 1.5rem 1rem 2rem;
  text-align: center;
  position: sticky;
  top: 0;
  z-index: 10;
  overflow: hidden;
}
header h1 { margin: 0 0 .5rem; font-size: clamp(1.8rem,4vw,2.6rem); }
.tagline { margin: 0 0 1rem; font-weight: 500; }
nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
nav a { text-decoration: none; padding: .4rem .75rem; border-radius: 999px; background: rgba(255,255,255,.35); color: #222; font-weight: 600; font-size: .9rem; }
nav a:hover, nav a:focus { background: #fff; outline: 2px solid #222; }
main { max-width: 1000px; margin: 0 auto; padding: 2rem 1rem 4rem; }
.panel { background: var(--bg-panel); border-radius: var(--radius); padding: 1.5rem 1.25rem 2rem; margin-bottom: 2rem; box-shadow: var(--shadow-1); position: relative; overflow: clip; }
.panel::after { content: ""; position: absolute; inset: 0; pointer-events: none; background: linear-gradient(120deg,rgba(255,255,255,0) 60%,rgba(255,255,255,.4) 75%,rgba(255,255,255,0) 85%); transform: translateX(-100%); animation: sheen 6s linear infinite; }
@keyframes sheen { 0% { transform: translateX(-100%);} 90% { transform: translateX(110%);} 100% { transform: translateX(110%);} }
.panel h2 { margin-top: 0; font-size: 1.4rem; }
.warning { border-left: 6px solid #ff7f36; }
.facts { border-left: 6px solid #ffa726; }
.nutrition { border-left: 6px solid #ffca28; }
.tips { border-left: 6px solid #66bb6a; }
.sources { border-left: 6px solid #42a5f5; }
.debunk { font-weight: 600; color: #b34a00; }
.grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(120px,1fr)); gap: .75rem; margin: 1rem 0 1.25rem; }
.grid > div { background: var(--bg-soft); border: 1px solid var(--border-soft); padding: .75rem .5rem; border-radius: 12px; text-align: center; font-size: .85rem; position: relative; overflow: hidden; }
.grid > div::before { content:""; position:absolute; inset:0; background:linear-gradient(140deg,rgba(255,255,255,.35),rgba(255,255,255,0)); opacity:0; transition:opacity var(--transition-fast); }
.grid > div:hover::before { opacity:1; }
.note { font-size: .75rem; color: #555; }
ol { padding-left: 1.1rem; }
#portion-form { display: flex; flex-wrap: wrap; gap: .75rem; align-items: center; margin-top: 1rem; }
#portion-form input { padding: .4rem .5rem; width: 120px; }
#portion-form button { padding: .55rem 1rem; background: var(--accent); border: none; border-radius: 999px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 10px -2px rgba(0,0,0,.18); transition: background var(--transition-fast), transform var(--transition-fast); }
#portion-form button:hover, #portion-form button:focus { background: var(--accent-strong); transform: translateY(-2px); }
.estimates { margin-top: 1rem; font-size: .9rem; background: #f6fff5; border: 1px solid #c8e6c9; padding: .75rem .9rem; border-radius: 8px; min-height: 2rem; }
footer { text-align: center; padding: 2rem 1rem; background: #222; color: #eee; position: relative; }

/* Floating mango decorations */
.mango-sky { position:absolute; inset:0; pointer-events:none; z-index:0; }
.mango { position:absolute; width:52px; height:34px; background: radial-gradient(circle at 30% 30%, #ffe08a, #ffb347 70%); border-radius: 60% 40% 55% 45% / 55% 45% 60% 40%; box-shadow: 0 4px 8px -2px rgba(0,0,0,.25); opacity:.65; animation: drift 18s linear infinite; }
.mango::after { content:""; position:absolute; top:-6px; left:18px; width:10px; height:14px; background:#2e7d32; border-radius:2px 8px 2px 8px; transform: rotate(25deg); }
.mango.m1 { top:10%; left:6%; animation-duration: 22s; }
.mango.m2 { top:25%; left:78%; animation-duration: 26s; }
.mango.m3 { top:55%; left:15%; animation-duration: 24s; }
.mango.m4 { top:70%; left:60%; animation-duration: 28s; }
.mango.m5 { top:35%; left:45%; animation-duration: 30s; }
@keyframes drift { 0% { transform: translateY(0) rotate(0deg);} 50% { transform: translateY(-30px) rotate(8deg);} 100% { transform: translateY(0) rotate(0deg);} }

/* Theme toggle */
.theme-toggle { position:absolute; top:12px; right:14px; background: rgba(255,255,255,.5); border:1px solid rgba(0,0,0,.15); backdrop-filter: blur(4px); padding:.5rem .7rem; border-radius: 10px; cursor:pointer; font-size:1rem; line-height:1; transition: background var(--transition-fast), transform var(--transition-fast); }
.theme-toggle:hover { background: rgba(255,255,255,.85); transform: translateY(-2px); }

/* Back to top button */
.to-top { position: fixed; bottom: 1.5rem; right: 1.25rem; background: var(--accent); border:none; color:#222; width:48px; height:48px; border-radius: 14px; font-size:1.3rem; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 18px -4px rgba(0,0,0,.4); opacity:0; pointer-events:none; transition: opacity var(--transition-fast), transform var(--transition-fast), background var(--transition-fast); }
.to-top:hover { background: var(--accent-strong); transform: translateY(-3px); }
.to-top.visible { opacity:1; pointer-events:auto; }

/* Reviews carousel */
.reviews { border-left: 6px solid #ff7043; }
.reviews-shell { position: relative; overflow: hidden; }
.review-track { display:flex; gap:1.25rem; transition: transform 600ms cubic-bezier(.6,.05,.2,1); will-change: transform; }
.review { flex:0 0 100%; background: linear-gradient(135deg,#fff9ea,#ffffff 60%); border:1px solid var(--border-soft); border-radius: 14px; padding:1.25rem 1.1rem 1.3rem; box-shadow: 0 4px 14px -4px rgba(0,0,0,.12); position:relative; }
.review .quote { font-size:1rem; font-weight:500; margin:0 0 .9rem; }
.review .author { margin:0; font-size:.85rem; opacity:.75; font-weight:600; }
.review-controls { display:flex; align-items:center; justify-content:center; gap:.75rem; margin-top:1rem; }
.rev-btn { background: var(--accent); border:none; width:42px; height:42px; border-radius:12px; cursor:pointer; font-size:1rem; font-weight:600; box-shadow:0 4px 10px -2px rgba(0,0,0,.3); transition: background var(--transition-fast), transform var(--transition-fast); }
.rev-btn:hover { background: var(--accent-strong); transform: translateY(-2px); }
.dots { display:flex; gap:.4rem; }
.dots button { width:11px; height:11px; background:#e0c48a; border:none; border-radius:50%; padding:0; cursor:pointer; transition:background var(--transition-fast), transform var(--transition-fast); }
.dots button.active { background:#ff9800; transform:scale(1.3); }
.dots button:hover { background:#ffbb42; }

/* Dark theme overrides */
body.dark { color:#e6e6e6; background: radial-gradient(circle at 30% 20%, #2a210f, #161616 60%); --bg-panel:#1f1f1f; --bg-soft:#2a240f; --border-soft:#4a4020; }
body.dark footer { background:#000; }
body.dark nav a { background: rgba(255,255,255,.15); color:#fff; }
body.dark nav a:hover, body.dark nav a:focus { background:#fff; color:#222; }
body.dark .review { background: linear-gradient(135deg,#2a240f,#1f1f1f 60%); }
body.dark .mango { box-shadow: 0 4px 10px -2px rgba(0,0,0,.8); }

/* Side decorative mango photos (simulated with gradients and masks) */
.side-decor { position: fixed; top:0; bottom:0; width:120px; display:flex; flex-direction:column; justify-content:space-around; gap:2rem; padding:1rem .25rem; pointer-events:none; opacity:.75; filter: drop-shadow(0 4px 12px rgba(0,0,0,.25)); mix-blend-mode:multiply; }
.side-decor.left { left:0; }
.side-decor.right { right:0; }
.mango-pic { width:100px; height:140px; background: radial-gradient(circle at 30% 25%, #fff6cc, #ffb347 55%, #ff9800 90%); border-radius:60% 40% 55% 45% / 55% 45% 60% 40%; position:relative; animation: floatY 9s ease-in-out infinite; }
.mango-pic::after { content:""; position:absolute; top:-14px; left:46px; width:28px; height:34px; background: radial-gradient(circle at 30% 30%, #449a3f,#2e7d32); border-radius:40% 60% 50% 50%; transform: rotate(25deg); }
.mango-pic.mp2 { animation-delay: -2s; }
.mango-pic.mp3 { animation-delay: -4s; }
.mango-pic.mp4 { animation-delay: -1s; }
.mango-pic.mp5 { animation-delay: -3s; }
.mango-pic.mp6 { animation-delay: -5s; }
@keyframes floatY { 0%,100% { transform: translateY(-12px) rotate(2deg);} 50% { transform: translateY(12px) rotate(-4deg);} }

@media (max-width: 1100px) { .side-decor { display:none; } }

/* Horizontal whoosh entrance */
.panel.pre[data-anim="left"] { transform: translate(-60px, 20px); }
.panel.pre[data-anim="right"] { transform: translate(60px, 20px); }
.panel.in[data-anim] { transform: translate(0,0) !important; }

/* Add subtle whoosh trail using pseudo element */
.panel.in::before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 10% 10%, rgba(255,255,255,.6),rgba(255,255,255,0) 60%); opacity:0; animation: whoosh 1.2s ease-out forwards; pointer-events:none; mix-blend-mode:overlay; }
@keyframes whoosh { 0% { opacity:.9; filter: blur(12px); transform: scaleX(0.7) translateX(-40px);} 60% { opacity:.15; } 100% { opacity:0; filter: blur(18px); transform: scaleX(1) translateX(0);} }

/* Smooth scroll snap for sections to feel crisp */
main { scroll-behavior:smooth; }
@media (min-width:900px) { html { scroll-snap-type: y proximity; } .panel { scroll-snap-align: start; } }

/* Reduce motion accessibility */
@media (prefers-reduced-motion: reduce) {
  .mango, .panel::after, .review-track { animation: none !important; transition: none !important; }
}

@media (min-width: 700px) {
  .review { flex:0 0 60%; }
}
@media (prefers-color-scheme: dark) { body { background: #151515; color: #e6e6e6; } .panel { background:#1f1f1f; box-shadow: 0 4px 16px -4px rgba(0,0,0,.6); } .grid > div { background:#2a240f; border-color:#4a4020; } nav a { background: rgba(255,255,255,.15); color:#fff; } nav a:hover, nav a:focus { background:#fff; color:#222; } footer { background:#000; } }
